<div class="character-sheet" ng-controller="CharacterSheetCtrl as charSheetCtrl">
    <!-- Header section -->

    <!-- First row of character text fields. -->
    <div layout="row">
        <md-input-container flex="33">
            <input type="text" ng-model="charSheetCtrl.character.name" placeholder="Name">
        </md-input-container>
        <md-input-container flex="33">
            <input type="text" ng-model="charSheetCtrl.character.playerName" placeholder="Player Name">
        </md-input-container>
        <md-input-container flex="33">
            <label>Caste</label>
            <md-select ng-model="character.caste">
                <md-option ng-repeat="casteName in charSheetCtrl.casteList" value="{{casteName}}">{{casteName}}</md-option>
            </md-select>
        </md-input-container>
    </div>

    <!-- Second row of character text fields. -->
    <div layout="row">
        <md-input-container flex="33">
            <input type="text" ng-model="charSheetCtrl.character.concept" placeholder="Concept">
        </md-input-container>
        <md-input-container flex="33">
            <input type="text" ng-model="charSheetCtrl.character.supernalAbility" placeholder="Supernal Ability">
        </md-input-container>
        <md-input-container flex="33">
            <input type="text" ng-model="charSheetCtrl.character.anima" placeholder="Anima">
        </md-input-container>
    </div>

    <!-- Attributes section -->
    <div layout="row">
        <div ng-repeat="attributeChunk in charSheetCtrl.attributeChunks" layout="column" flex="33">
            <div ng-repeat="attributeRank in attributeChunk" layout="row">
                <span flex="50">{{charSheetCtrl.getAttributeLabel(attributeRank.abilityId) | translate}}</span>
                <dots ng-model="attributeRank.rank"></dots>
            </div>
        </div>
    </div>

    <div layout="row">
        <!-- Abilities section -->
        <div layout="column" flex="33">
            <h2>Abilities</h2>
            <div layout="row" ng-repeat="abilityRank in charSheetCtrl.character.abilityRanks">
                <span flex="50">{{charSheetCtrl.getAbilityLabel(abilityRank.abilityId) | translate}}</span>
                <dots flex="50" ng-model="abilityRank.rank"></dots>
            </div>
        </div>
        <div layout="column" flex="66">
            <!-- Merits section -->
            <h2>Merits</h2>
            <div layout="row">
                <md-input-container flex="85">
                    <label>Merits</label>
                    <md-select ng-model="charSheetCtrl.selectedMerit">
                        <md-option ng-repeat="merit in charSheetCtrl.meritsList | orderBy:'name'" ng-value="merit">{{merit.name}}</md-option>
                    </md-select>
                </md-input-container>
                <md-button flex="15" class="md-icon-button" ng-click="charSheetCtrl.addMerit(charSheetCtrl.selectedMerit)">
                    <div class="material-icons">add_circle_outline</div>
                </md-button>
            </div>
            <div layout="row" ng-repeat="(meritId, meritRank) in charSheetCtrl.character.meritRanks">
                <span flex="50">{{charSheetCtrl.labelForMerit(charSheetCtrl.merits[meritId])}}</span>
                <dots flex="35" ng-model="meritRank.rank" allowed-values=charSheetCtrl.merits[meritId].availableDots></dots>
                <md-button flex="15" class="md-icon-button" ng-click="charSheetCtrl.removeMerit(meritId)"><div class="material-icons">remove_circle_outline</div></md-button>
            </div>

            <!-- Willpower and Limit Break sections -->
            <div layout="row">
                <div layout="column" flex="50">
                    <h2>Willpower</h2>
                    <dots ng-model="charSheetCtrl.character.willpower" count="10"></dots>
                </div>
                <div layout="column" flex="50">
                    <h2>Limit Break</h2>
                    <md-input-container>
                        <textarea ng-model="charSheetCtrl.character.limitBreak"></textarea>
                    </md-input-container>
                </div>
            </div>

            <!-- Essence and Limit Trigger sections -->
            <div layout="row">
                <div layout="column" flex="50">
                    <h2>Essence</h2>
                    <dots ng-model="charSheetCtrl.character.essence"></dots>
                </div>
                <div layout="column" flex="50">
                    <h2>Limit Trigger</h2>
                    <md-input-container>
                        <textarea ng-model="charSheetCtrl.character.limitTrigger"></textarea>
                    </md-input-container>
                </div>
            </div>

            <!-- Experience section -->
            <div layout="row">
                <div layout="column" flex="50">
                    <h2>Experience</h2>
                    <p>Experience panel contents here.</p>
                </div>
                <div layout="column" flex="50">
                    <h2>Solar Experience</h2>
                    <p>Solar Experience panel contents here.</p>
                </div>
            </div>

            <h2>Weapons</h2>
            <p>Weapons panel contents here.</p>

            <!-- Martial Arts section -->
            <div layout="row">
                <md-input-container flex="85">
                    <label>Martial Arts</label>
                    <md-select ng-model="charSheetCtrl.selectedMartialArt">
                        <md-option ng-repeat="martialArt in charSheetCtrl.martialArtsList | orderBy:'name'" ng-value="martialArt">{{martialArt.name}}</md-option>
                    </md-select>
                </md-input-container>
                <md-button flex="15" class="md-icon-button" ng-click="charSheetCtrl.addMartialArt(charSheetCtrl.selectedMartialArt.id)"><div class="material-icons">add_circle_outline</div></md-button>
            </div>
            <div layout="row" ng-repeat="(martialArtId, martialArtRank) in charSheetCtrl.character.martialArtsRanks">
                <span flex="50">{{charSheetCtrl.martialArts[martialArtId].name}}</span>
                <dots flex="35" ng-model="martialArtRank.rank"></dots>
                <md-button flex="15" class="md-icon-button" ng-click="charSheetCtrl.removeMartialArt(martialArtId)"><div class="material-icons">remove_circle_outline</div></md-button>
            </div>

            <!-- Crafts section -->
            <div layout="row">
                <md-input-container flex="85" >
                    <label>Crafts</label>
                    <input type="text" ng-model="charSheetCtrl.selectedCraft">
                </md-input-container>
                <md-button flex="15" class="md-icon-button" ng-click="charSheetCtrl.addCraft(charSheetCtrl.selectedCraft)"><div class="material-icons">add_circle_outline</div></md-button>
            </div>
            <div layout="row" ng-repeat="(craftId, craftRank) in charSheetCtrl.character.craftsRanks">
                <span flex="50">{{craftId}}</span>
                <dots flex="35" ng-model="craftRank.rank"></dots>
                <md-button flex="15" class="md-icon-button" ng-click="charSheetCtrl.removeCraft(craftId)"><div class="material-icons">remove_circle_outline</div></md-button>
            </div>

            <!-- Health & Defense -->
            <h2>Health & Defense</h2>
            <p>Health & Defense panel contents here</p>

        </div>
    </div>

    <!-- Debugging: Show character as JSON at bottom of sheet. -->
    <div layout="row">
        <textarea layout-fill rows="40" readonly="true">{{charSheetCtrl.character | json}}</textarea>
    </div>
</div>

